{"ast":null,"code":"var express = require('express');\n\nvar mongoose = require('mongoose'); //next\n\n\nvar next = require('next');\n\nvar port = process.env.PORT || 3000;\nvar dev = process.env.NODE_DEV !== 'production'; //true false\n\nvar nextApp = next({\n  dev: dev\n});\nvar handle = nextApp.getRequestHandler(); //part of next config\n//routes\n\nvar adminRoutes = require('./routes/adminRoutes');\n\nvar projectRoutes = require('./routes/projectRoutes');\n\nmongoose.connect(\"mongodb://localhost/portfolio\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nnextApp.prepare().then(function () {\n  var app = express();\n  app.use(express.json());\n  app.use(express.urlencoded({\n    extended: true\n  }));\n  app.use('/api/', adminRoutes);\n  app.use('/api/', projectRoutes);\n  app.get('*', function (req, res) {\n    return handle(req, res); // for all the react stuff\n  });\n  app.listen(port, function (err) {\n    if (err) throw err;\n    console.log(\"ready at http://localhost:\".concat(port));\n  });\n});","map":{"version":3,"sources":["C:/Users/domin/Documents/domcattell/site/server/server.js"],"names":["express","require","mongoose","next","port","process","env","PORT","dev","NODE_DEV","nextApp","handle","getRequestHandler","adminRoutes","projectRoutes","connect","useNewUrlParser","useUnifiedTopology","prepare","then","app","use","json","urlencoded","extended","get","req","res","listen","err","console","log"],"mappings":"AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB,C,CACA;;;AACA,IAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMG,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;AACA,IAAMC,GAAG,GAAGH,OAAO,CAACC,GAAR,CAAYG,QAAZ,KAAyB,YAArC,C,CAAkD;;AAClD,IAAMC,OAAO,GAAGP,IAAI,CAAC;AAAEK,EAAAA,GAAG,EAAHA;AAAF,CAAD,CAApB;AACA,IAAMG,MAAM,GAAGD,OAAO,CAACE,iBAAR,EAAf,C,CAA2C;AAE3C;;AACA,IAAMC,WAAW,GAAGZ,OAAO,CAAC,sBAAD,CAA3B;;AACA,IAAMa,aAAa,GAAGb,OAAO,CAAC,wBAAD,CAA7B;;AAEAC,QAAQ,CAACa,OAAT,CAAiB,+BAAjB,EAAkD;AAAEC,EAAAA,eAAe,EAAE,IAAnB;AAAyBC,EAAAA,kBAAkB,EAAE;AAA7C,CAAlD;AAEAP,OAAO,CAACQ,OAAR,GAAkBC,IAAlB,CAAuB,YAAM;AACzB,MAAMC,GAAG,GAAGpB,OAAO,EAAnB;AACAoB,EAAAA,GAAG,CAACC,GAAJ,CAAQrB,OAAO,CAACsB,IAAR,EAAR;AACAF,EAAAA,GAAG,CAACC,GAAJ,CAAQrB,OAAO,CAACuB,UAAR,CAAmB;AACvBC,IAAAA,QAAQ,EAAE;AADa,GAAnB,CAAR;AAIAJ,EAAAA,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBR,WAAjB;AACAO,EAAAA,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBP,aAAjB;AAEAM,EAAAA,GAAG,CAACK,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACvB,WAAOhB,MAAM,CAACe,GAAD,EAAMC,GAAN,CAAb,CADuB,CACC;AAC3B,GAFD;AAIAP,EAAAA,GAAG,CAACQ,MAAJ,CAAWxB,IAAX,EAAiB,UAAAyB,GAAG,EAAI;AACpB,QAAIA,GAAJ,EAAS,MAAMA,GAAN;AACTC,IAAAA,OAAO,CAACC,GAAR,qCAAyC3B,IAAzC;AACH,GAHD;AAIH,CAlBD","sourcesContent":["const express = require('express')\r\nconst mongoose = require('mongoose')\r\n//next\r\nconst next = require('next')\r\nconst port = process.env.PORT || 3000\r\nconst dev = process.env.NODE_DEV !== 'production' //true false\r\nconst nextApp = next({ dev })\r\nconst handle = nextApp.getRequestHandler() //part of next config\r\n\r\n//routes\r\nconst adminRoutes = require('./routes/adminRoutes');\r\nconst projectRoutes = require('./routes/projectRoutes');\r\n\r\nmongoose.connect(\"mongodb://localhost/portfolio\", { useNewUrlParser: true, useUnifiedTopology: true });\r\n\r\nnextApp.prepare().then(() => {\r\n    const app = express()\r\n    app.use(express.json());\r\n    app.use(express.urlencoded({\r\n        extended: true\r\n    }));\r\n\r\n    app.use('/api/', adminRoutes);\r\n    app.use('/api/', projectRoutes);\r\n\r\n    app.get('*', (req, res) => {\r\n        return handle(req, res) // for all the react stuff\r\n    })\r\n\r\n    app.listen(port, err => {\r\n        if (err) throw err;\r\n        console.log(`ready at http://localhost:${port}`)\r\n    })\r\n})\r\n\r\n\r\n"]},"metadata":{},"sourceType":"script"}